;(function(window) {
    var currentTime = window.document.getElementById('current-time').value;
    var player = QbPlayers.ffhls({
        id: 'video',
        currentTime: currentTime,
        timer: 15,
        timerFunc: function (currentTime) {
            eventData.eventName = 'CurrentTime';
            eventData.CurrentTime = currentTime;
            eventData.Duration = player.duration();
            $.post(path, JSON.stringify(eventData)).then(function(data) {});
        }
    });

    player.on('userinactive', function() {
        if (!this.paused()) {
            $('.video-js-title').removeClass('show').addClass('hide');
        }
    });

    player.on('ended', function() {
        $('.video-js-title').removeClass('hide').addClass('show');
        this.loadingSpinner.show();
        this.load();
        window.document.location.href = back_path;
    });

    player.on('useractive', function() {
        if (!this.paused()) {
            $('.video-js-title').removeClass('hide').addClass('show');
        }
    });

    $(document).on('click', '#video, .vjs-play-control', function() {
        if (player.paused()) {
            $('.video-js-title').removeClass('hide').addClass('show');
        }
    });
})(window);