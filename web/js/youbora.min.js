(function(window, document) {
    window.VodYB = {
        initYoubora: function (playerReference, options) {
            console.log(playerReference)
            options = {
                accountCode: document.getElementById('account').value,
                username: document.getElementById('username').value,
                transactionCode: document.getElementById('transaction-code').value,
                media: {
                    title: document.getElementById('title').value,
                    source: document.getElementById('source').value
                },
                operator: document.getElementById('operator').value,
                playerType: document.getElementById('player-type').value
            };
            // Verificamos que exista
            if (typeof $YB !== undefined) {
                if ('shaka' === options.playerType) {
                    window.youbora = new $YB.plugins.Shaka(playerReference, {
                        accountCode: options.accountCode,
                        enableAnalytics: true,
                        username: options.username,
                        transactionCode: options.transactionCode,
                        media: {
                            title: options.media.title,
                            resource: options.media.source
                        },
                        extraParams: {
                            param1: options.operator
                        }
                    });

                    window.youbora.playerHandler();
                } else if ('hls' === options.playerType) {
                    window.youbora = new $YB.plugins.Hlsjs(playerReference, {
                        accountCode: options.accountCode,
                        enableAnalytics: true,
                        username: options.username,
                        transactionCode: options.transactionCode,
                        media: {
                            title: options.media.title,
                            resource: options.media.source,
                            isLive: true
                        },
                        extraParams: {
                            param1: options.operator
                        }
                    });
                } else if ('videojs' === options.playerType) {
                    var player = videojs(playerReference);
                    player.youbora({
                        accountCode: options.accountCode,
                        enableAnalytics: true,
                        username: options.username,
                        transactionCode: options.transactionCode,
                        media: {
                            title: options.media.title,
                            resource: options.media.source,
                            isLive: false
                        },
                        extraParams: {
                            param1: options.operator
                        }
                    });
                }
            }
        }
    }
})(window, document);