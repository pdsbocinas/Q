(function() {
  // subs con etiqueta en castella
  videojs.addLanguage('es', {
    'subtitles off': 'sin subs'
  });
  
  var dynmovie = document.getElementById('thamovie'),
      player;

  if (typeof dynmovie.dataset.sourcetype == 'undefined') {
    // ejemplo estático
    player = videojs('#thamovie', {}, function() {
      // Experiencia continua en segundos:
      this.currentTime(1000);
    });

    player.showControBarOnDataLoaded();
  } else {
    // ejemplo semi dinámico
    var dynmovie = document.getElementById('thamovie'),
      src = dynmovie.dataset.source,
      type = dynmovie.dataset.sourcetype,
      source = document.createElement('source');
    dynmovie.className += " video-js";
    player = videojs('#thamovie', { "language": "es" }, function() {
      this.src({
        "type": type,
        "src": src,
      });
      // Experiencia continua en segundos:
      this.currentTime(1000);
    });

    player.showControBarOnDataLoaded();
    player.on('error', function(err) {
      if (this.error().code == 4) {
        location.reload();
      }
    });
  }
})();
